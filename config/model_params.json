{
  "schema_version": "1.0.0",
  "description": "Model hyperparameters for Bank Churn Prediction system",
  "last_updated": "2024-01-01",
  "models": {
    "logistic_regression": {
      "description": "Logistic Regression with L2 regularization for interpretability",
      "hyperparameters": {
        "penalty": "l2",
        "C": 0.1,
        "solver": "saga",
        "max_iter": 5000,
        "tol": 0.001,
        "class_weight": "balanced",
        "random_state": 42,
        "n_jobs": -1,
        "warm_start": false,
        "l1_ratio": null
      },
      "training_notes": "Uses saga solver for large datasets, increased iterations for convergence, balanced class weights for imbalanced data",
      "expected_performance": {
        "auc": [0.80, 0.85],
        "f1": [0.60, 0.70],
        "training_time_seconds": [30, 60]
      }
    },
    "random_forest": {
      "description": "Random Forest Classifier with balanced class weights",
      "hyperparameters": {
        "n_estimators": 200,
        "criterion": "gini",
        "max_depth": 10,
        "min_samples_split": 10,
        "min_samples_leaf": 5,
        "min_weight_fraction_leaf": 0.0,
        "max_features": "sqrt",
        "max_leaf_nodes": null,
        "min_impurity_decrease": 0.0,
        "bootstrap": true,
        "oob_score": false,
        "class_weight": "balanced_subsample",
        "random_state": 42,
        "verbose": 0,
        "warm_start": false,
        "ccp_alpha": 0.0,
        "max_samples": null,
        "n_jobs": -1
      },
      "training_notes": "Uses balanced_subsample for better handling of class imbalance, limited max_depth to prevent overfitting",
      "expected_performance": {
        "auc": [0.78, 0.83],
        "f1": [0.55, 0.65],
        "training_time_seconds": [10, 30]
      }
    },
    "xgboost": {
      "description": "XGBoost Classifier with scale_pos_weight for imbalanced data",
      "hyperparameters": {
        "n_estimators": 200,
        "max_depth": 6,
        "learning_rate": 0.1,
        "verbosity": 1,
        "objective": "binary:logistic",
        "booster": "gbtree",
        "tree_method": "auto",
        "n_jobs": -1,
        "gamma": 0,
        "min_child_weight": 1,
        "max_delta_step": 0,
        "subsample": 0.8,
        "colsample_bytree": 0.8,
        "colsample_bylevel": 1,
        "colsample_bynode": 1,
        "reg_alpha": 0.1,
        "reg_lambda": 0.1,
        "scale_pos_weight": 2.33,
        "base_score": null,
        "random_state": 42,
        "missing": null,
        "num_parallel_tree": 1,
        "monotone_constraints": null,
        "interaction_constraints": null,
        "importance_type": "gain",
        "gpu_id": null,
        "validate_parameters": false,
        "max_cat_to_onehot": null,
        "max_cat_threshold": null,
        "eval_metric": "logloss",
        "early_stopping_rounds": null,
        "callbacks": null
      },
      "training_notes": "scale_pos_weight calculated from training data (negative/positive ratio), added L1/L2 regularization, subsampling for better generalization",
      "expected_performance": {
        "auc": [0.78, 0.82],
        "f1": [0.58, 0.68],
        "training_time_seconds": [15, 40]
      }
    },
    "lightgbm": {
      "description": "LightGBM Classifier with balanced class weights",
      "hyperparameters": {
        "n_estimators": 200,
        "learning_rate": 0.1,
        "num_leaves": 31,
        "max_depth": 7,
        "min_child_samples": 20,
        "subsample": 0.8,
        "colsample_bytree": 0.8,
        "reg_alpha": 0.1,
        "reg_lambda": 0.1,
        "min_split_gain": 0.0,
        "min_child_weight": 0.001,
        "subsample_freq": 1,
        "class_weight": "balanced",
        "random_state": 42,
        "n_jobs": -1,
        "importance_type": "split",
        "boosting_type": "gbdt",
        "objective": "binary",
        "metric": "binary_logloss",
        "verbosity": -1,
        "is_unbalance": false,
        "boost_from_average": true,
        "max_bin": 255,
        "extra_trees": false,
        "path_smooth": 0.0
      },
      "training_notes": "Uses balanced class weights, limited num_leaves and max_depth for regularization, subsampling for generalization",
      "expected_performance": {
        "auc": [0.78, 0.82],
        "f1": [0.56, 0.66],
        "training_time_seconds": [5, 20]
      }
    }
  },
  "training_config": {
    "cross_validation": {
      "cv_folds": 5,
      "scoring_metric": "roc_auc",
      "random_state": 42,
      "shuffle": true,
      "stratify": true
    },
    "class_imbalance": {
      "strategy": "class_weights",
      "smote_threshold": 0.3,
      "fallback_strategy": "class_weights"
    },
    "early_stopping": {
      "enabled": false,
      "patience": 10,
      "min_delta": 0.001,
      "metric": "val_loss"
    },
    "performance_thresholds": {
      "minimum_auc": 0.70,
      "minimum_f1": 0.50,
      "minimum_accuracy": 0.65,
      "maximum_training_time_minutes": 30
    }
  },
  "feature_engineering": {
    "feature_selection": {
      "strategy": "all_features",
      "correlation_threshold": 0.95,
      "variance_threshold": 0.01,
      "mutual_info_threshold": 0.001
    },
    "preprocessing": {
      "numerical_scaling": "standard",
      "categorical_encoding": "one_hot",
      "missing_values": "median",
      "outlier_handling": "winsorize"
    },
    "feature_groups": {
      "low_engagement": ["total_transactions", "login_frequency", "app_usage_minutes", "days_since_last_login", "customer_service_calls", "activity_score"],
      "high_fees": ["avg_monthly_fees", "overdraft_frequency", "penalty_charges", "fee_to_balance_ratio", "overdraft_amount"],
      "poor_service": ["num_complaints", "complaint_resolution_days", "satisfaction_score", "escalation_count", "service_quality_rating"],
      "low_product_holding": ["num_products", "has_credit_card", "has_mortgage", "has_investment_account", "has_insurance", "product_diversity_score"],
      "short_tenure": ["tenure_months", "balance_growth_rate", "is_new_customer", "tenure_segment", "age_group"],
      "balance_fluctuations": ["avg_account_balance", "balance_trend", "balance_volatility", "salary_consistency", "withdrawal_ratio"],
      "demographics": ["income_bracket", "digital_adoption", "family_size", "education_level", "marital_status"],
      "credit_issues": ["credit_score", "credit_utilization", "num_loan_defaults", "debt_to_income", "credit_inquiry_count"],
      "personalization_offers": ["promotions_sent", "promotion_response_rate", "reward_points", "personalized_offers_count", "offer_relevance_score"],
      "contract_events": ["account_age_months", "maturity_proximity_days", "renewal_flag", "account_closure_requests", "maturity_status"]
    }
  },
  "model_selection": {
    "primary_metric": "auc",
    "secondary_metrics": ["f1", "precision", "recall"],
    "business_constraints": {
      "minimum_precision": 0.70,
      "minimum_recall": 0.60,
      "maximum_false_positive_rate": 0.25
    },
    "explainability_requirements": {
      "shap_required": true,
      "feature_importance_required": true,
      "local_explanations_required": true
    }
  },
  "deployment_config": {
    "model_format": "pickle",
    "versioning_scheme": "semantic",
    "artifact_storage": {
      "models": "models/production/",
      "preprocessing": "models/preprocessing/",
      "explainability": "models/explainability/",
      "metadata": "models/metadata/"
    },
    "monitoring": {
      "data_drift_enabled": true,
      "concept_drift_enabled": true,
      "performance_drift_enabled": true,
      "monitoring_frequency": "daily"
    }
  },
  "hyperparameter_tuning": {
    "enabled": false,
    "method": "grid_search",
    "param_grids": {
      "logistic_regression": {
        "C": [0.001, 0.01, 0.1, 1, 10, 100],
        "solver": ["liblinear", "saga"],
        "penalty": ["l1", "l2"]
      },
      "random_forest": {
        "n_estimators": [100, 200, 300],
        "max_depth": [5, 10, 15, null],
        "min_samples_split": [2, 5, 10],
        "min_samples_leaf": [1, 2, 4]
      },
      "xgboost": {
        "n_estimators": [100, 200, 300],
        "max_depth": [3, 6, 9],
        "learning_rate": [0.01, 0.1, 0.2],
        "subsample": [0.8, 0.9, 1.0]
      },
      "lightgbm": {
        "n_estimators": [100, 200, 300],
        "num_leaves": [31, 63, 127],
        "learning_rate": [0.01, 0.1, 0.2],
        "subsample": [0.8, 0.9, 1.0]
      }
    },
    "tuning_config": {
      "cv_folds": 3,
      "scoring": "roc_auc",
      "n_jobs": -1,
      "verbose": 1
    }
  },
  "version_history": {
    "v1.0": {
      "date": "2024-01-01",
      "changes": [
        "Initial hyperparameter configuration",
        "Optimized for 52 features across 10 churn drivers",
        "Class imbalance handling with scale_pos_weight and class_weights",
        "Regularization to prevent overfitting",
        "Cross-validation for robust performance estimation"
      ],
      "expected_performance": {
        "best_model_auc": [0.80, 0.85],
        "best_model_f1": [0.60, 0.70],
        "training_time_minutes": [1, 5]
      }
    }
  }
}